<!doctype html>
<html>
<head>
    <meta charset="utf-8">
	<meta name="Generator" content="">
	<meta name="Author" content="">
	<meta name="Keywords" content="">
	<meta name="Description" content="">
	<title></title>
	<style type="text/css">
	    *{margin:0;padding:0;font-family:"Microsoft YaHei"}
		img{border:0;}
		ul li,ol li{list-style:none;}
		li a{text-decoration:none;color:white;}
		
		#gray{
		    width:100%;height:100%;background:rgba(0,0,0,0.5);position:fixed;
			top:0;display:none;overflow:hidden;
		}
		#Login{width:600px;height:350px;background:#fff;position:absolute;left:50%;top:50%;
		    margin-left:-300px;margin-top:-175px;min-width:600px;min-height:350px;}
		#Login .title{
		    width:600px;height:45px;background:#f93;color:#fff;font-size:18px;
			line-height:45px;text-indent:35px;cursor:move;
		}
		#Login .title a{color:#ddd;font-size:24px;text-decoration:none;
		    float:right;margin-right:10px;}
		#Login .title a:hover{color:white;}
		#Login p.info{
		    font-size:14px;color:#666;margin:20px;
		}
		#Login #lg{
		    width:315px;height:190px;margin:15px auto 0;
		}
		#lg p{
		    font-size:16px;margin-bottom:15px;
		}
		#lg p input.txt{
		    width:260px;height:35px;border:1px solid #ddd;border-radius:3px;
			
		}
		#lg p input.but{border:none;width:263px;height:40px;background-image:url(images/but_bg1.jpg);
			margin-left:40px;}
	</style>
</head>
<body>
    <span id='spnLogin'>登录</span>
    <div id='gray'>
	    <div id='Login'>
		    <div class='title' id='divLoginHead'>用户登录<a href='javascript:void(0)' id='lnkClose'>X</a></div>
			<p class='info'><img src='images/new.png' width='40' height='40' align='center' />号外!我的DIY主题管理功能上线了!即刻起, 登录360手机美化,
			可以将您制作的DIY主题保存到360美化云端,
			还可以使用手机的DIY主题管理等高级功能!</p>
			<div id='lg'>
			    <form>
				    <p>账号: <input type='text' class='txt' /></p>
				    <p>密码: <input type='text' class='txt' /></p>
				    <p><input type='submit' class='but' value='' /></p>
				</form>
			</div>
		</div>
	</div>
	
	<script src="js/jquery-1.9.1.min.js"></script>
	<script>
	    $(function() {
		    $('#spnLogin').click(function() {
			    $('#gray').fadeIn();
			});
		    $('#lnkClose').click(function() {
			    $('#gray').fadeOut();
				$('#Login').css({left:'50%',top:'50%','margin-left':'-300px','margin-top':'-175px'});
			});
			
			/*$('.title').mousedown(function() {
			    $(document.body).mousemove(function(e) {
				    var x = e.clientX;
					var y = e.clientY;
					var left = $('.title').offset().left;
					var top = $('.title').offset().top;
					$('#Login').css({left: (x - left) + 'px',top: (y - top) + 'px','margin-left':'auto','margin-top':'auto'});
				});
			}).mouseup(function() {});*/
			init(document.getElementById('divLoginHead'));
		});
		
		var i = 0, t = 0, y = 0;
		var isOver = false;
		var zIndex = 3;
		function init(elem) {
		    var parentDom = elem.parentNode;
			elem.onmousedown = function(event) {
			    var e = event || window.event;
				x = e.clientX;
				y = e.clientY;
				
				var windowWidth = document.body.clientWidth;
				// document.documentElement.clientHeight
				var windowHeight = document.getElementById('gray').clientHeight;
				var contentWidth = parentDom.offsetWidth;
				var contentHeight = parentDom.offsetHeight;
				
				l = parseInt(parentDom.offsetLeft);
				t = parseInt(parentDom.offsetTop);
				
				isOver = true;
				zIndex++;
				parentDom.style.zIndex= zIndex;
				document.onmousemove = function(event) {
				    if(isOver){
					    var e = event || window.event;
						var newLeft = l + e.clientX - x;
						var newTop = t + e.clientY - y;
						newLeft = newLeft < 0 ? 0 : newLeft;
						newTop = newTop < 0 ? 0 : newTop;
						
						newLeft = newLeft > windowWidth - contentWidth ? windowWidth - contentWidth : newLeft;
						newTop = newTop > windowHeight - elem.clientHeight ? windowHeight - elem.clientHeight : newTop;
						parentDom.style.left = newLeft + 'px';
						parentDom.style.top = newTop + 'px';
						parentDom.style.marginLeft = '0px';
						parentDom.style.marginTop = '0px';
					}   
				}
				document.onmouseup = function() {
				    isOver = false;
				}
			}
		}
	</script>
</body>
</html>
